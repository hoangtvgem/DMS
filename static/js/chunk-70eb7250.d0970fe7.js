(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-70eb7250"],{"3e06":function(t,e,n){},"424e":function(t,e,n){"use strict";n.d(e,"d",(function(){return a})),n.d(e,"f",(function(){return o})),n.d(e,"a",(function(){return r})),n.d(e,"e",(function(){return s})),n.d(e,"c",(function(){return c})),n.d(e,"b",(function(){return l}));var i=n("b775");function a(){return Object(i["a"])({url:"/api/get/documentDashboard",method:"get"})}function o(t){return Object(i["a"])({url:"/api/get/documentList",method:"get",params:t})}function r(t){return Object(i["a"])({url:"/api/document/create",method:"post",data:t})}function s(t){return Object(i["a"])({url:"/api/document/getDetail",method:"get",params:t})}function c(t){return Object(i["a"])({url:"/api/document/edit",method:"put",data:t})}function l(t){return Object(i["a"])({url:"/api/document/delete",method:"delete",data:t})}},aff5:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"modal-fade"}},[n("div",{staticClass:"modal-backdrop"},[n("div",{staticClass:"modal",attrs:{role:"dialog","aria-labelledby":"modalTitle","aria-describedby":"modalDescription"}},[n("header",{staticClass:"modal-header",attrs:{id:"modalTitle"}},[t._t("header"),n("button",{staticClass:"btn-close",attrs:{type:"button","aria-label":"Close modal"},on:{click:t.close}},[t._v(" x ")])],2),n("section",{staticClass:"modal-body",attrs:{id:"modalDescription"}},[t._t("body")],2),n("footer",{staticClass:"modal-footer",staticStyle:{display:"inline-flex"}},[t._t("footer"),n("button",{staticClass:"btn-white",staticStyle:{width:"60px",display:"inline-flex","text-align":"center","margin-left":"10px"},attrs:{type:"button","aria-label":"Close modal"},on:{click:t.close}},[t._v(" Đóng ")])],2)])])])},a=[],o={name:"Modal",methods:{close:function(){this.$emit("close")}}},r=o,s=(n("bdd7"),n("2877")),c=Object(s["a"])(r,i,a,!1,null,null,null);e["a"]=c.exports},b782:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{align:"center",label:"ID",width:"95"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.$index)+" ")]}}])}),n("el-table-column",{attrs:{label:"Tên tài liệu"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.name)+" ")]}}])}),n("el-table-column",{attrs:{label:"Trạng thái",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t.statusDocument[e.row.status]))])]}}])}),n("el-table-column",{attrs:{label:"Thao tác",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return["reject"==e.row.status?n("span",[n("button",{staticClass:"btn-primary",staticStyle:{"margin-right":"20px"},on:{click:function(n){return t.requestDocument(e.row)}}},[t._v("Yêu cầu duyệt lại")])]):t._e(),"pending"==e.row.status?n("span",[e.row.currentProcessId==t.idProfile?n("button",{staticClass:"btn-primary",staticStyle:{"margin-right":"20px"},on:{click:function(n){return t.approveDocument(e.row)}}},[t._v("Duyệt")]):t._e(),e.row.currentProcessId==t.idProfile?n("button",{staticClass:"btn-danger",staticStyle:{"margin-right":"20px"},on:{click:function(n){return t.showModal(e.row)}}},[t._v("Từ chối")]):t._e()]):t._e(),"created"==e.row.status&&e.row.owner==t.idProfile?n("button",{staticClass:"btn-primary",staticStyle:{"margin-right":"20px"},on:{click:function(n){return t.requestDocument(e.row)}}},[t._v("Yêu cầu duyệt")]):t._e(),n("button",{staticClass:"btn-primary",staticStyle:{"margin-right":"20px"},on:{click:function(n){return t.viewDocument(e.row._id)}}},[n("i",{staticClass:"el-icon-view"})]),e.row.owner==t.idProfile?n("button",{staticClass:"btn-primary",on:{click:function(n){return t.editDocument(e.row._id)}}},[n("i",{staticClass:"el-icon-edit"})]):t._e(),e.row.owner==t.idProfile?n("button",{staticClass:"btn-danger",staticStyle:{"margin-left":"20px"},on:{click:function(n){return t.deleteDocument(e.row._id)}}},[n("i",{staticClass:"el-icon-delete"})]):t._e()]}}])})],1),n("Modal",{directives:[{name:"show",rawName:"v-show",value:t.isModalVisible,expression:"isModalVisible"}],on:{close:t.closeModal},scopedSlots:t._u([{key:"header",fn:function(){return[t._v(" Lý do từ chối duyệt ")]},proxy:!0},{key:"body",fn:function(){return[n("el-form",{ref:"form",attrs:{model:t.form,"label-width":"0px"}},[n("el-form-item",[n("el-input",{staticStyle:{width:"400px"},attrs:{type:"textarea"},model:{value:t.form.reason,callback:function(e){t.$set(t.form,"reason",e)},expression:"form.reason"}})],1)],1)]},proxy:!0},{key:"footer",fn:function(){return[n("button",{staticClass:"btn-green",staticStyle:{width:"50px",display:"inline-flex"},attrs:{type:"button","aria-label":"Close modal"},on:{click:function(e){return t.rejectDocument()}}},[t._v(" Lưu ")])]},proxy:!0}])})],1)},a=[],o=n("5530"),r=n("424e"),s=n("aff5"),c={components:{Modal:s["a"]},filters:{statusFilter:function(t){var e={published:"success",draft:"gray",deleted:"danger"};return e[t]}},data:function(){return{list:null,listLoading:!0,idProfile:JSON.parse(localStorage.getItem("profile")).id,statusDocument:{created:"Đã tạo mới",pending:"Đang trong quá trình duyệt",approved:"Đã duyệt",cancel:"Đã bị hủy",reject:"Bị từ chối duyệt"},isModalVisible:!1,form:{reason:""},dataReject:null}},created:function(){this.fetchData()},methods:{showModal:function(t){this.dataReject=t,this.isModalVisible=!0},closeModal:function(){this.isModalVisible=!1},fetchData:function(){this.getList()},getList:function(){var t=this;this.listLoading=!0,Object(r["f"])({isReject:!0}).then((function(e){t.list=e.data.data,t.listLoading=!1}))},approveDocument:function(t){var e=this;Object(r["c"])(Object(o["a"])(Object(o["a"])({},t),{},{currentProcessId:t.process[t.process.indexOf(this.idProfile)+1]})).then((function(t){e.getList(),e.$message("Duyệt tài liệu thành công")}))},rejectDocument:function(){var t=this;Object(r["c"])(Object(o["a"])(Object(o["a"])({},this.dataReject),{},{idUserReason:this.dataReject.currentProcessId,currentProcessId:this.dataReject.process[0],status:"reject",reason:this.form.reason})).then((function(e){t.getList(),t.closeModal(),t.$message("Từ chối duyệt tài liệu thành công")}))},requestDocument:function(t){var e=this;Object(r["c"])(Object(o["a"])(Object(o["a"])({},t),{},{status:"pending"})).then((function(t){e.getList(),e.$message("Yêu cầu duyệt tài liệu thành công")}))},deleteDocument:function(t){var e=this;Object(r["b"])({_id:t}).then((function(t){e.fetchData()}))},editDocument:function(t){this.$router.push("/document/".concat(t,"/edit"))},viewDocument:function(t){this.$router.push("/document/".concat(t,"/view"))}}},l=c,u=n("2877"),d=Object(u["a"])(l,i,a,!1,null,null,null);e["default"]=d.exports},bdd7:function(t,e,n){"use strict";n("3e06")}}]);